{
  "hash": "103c67b43bbacf5d5909943ca6492bf4",
  "result": {
    "markdown": "---\ntitle: \"Najpopularniejsze imię wśród papieży\"\ndescription: \"Ilościowa analiza imion papieży na podstawie danych z Wikipedii.\"\nauthor: \"Łukasz Wawrowski\"\ndate: \"11-09-2017\"\nimage: \"imie-papiez_files/figure-html/papieze-1.png\"\n---\n\n\n\n\nW ostatnim czasie zastanawiałem się, które imię było najczęściej wybierane przez papieży. Jako przeciętny śmiertelnik potrafię wymienić 6 ostatnich papieży i na tej podstawie stwierdzam, że dużą popularnością cieszyło się na pewno imię Jan oraz Benedykt. Do ustalenia rankingu imion papieży wykorzystam R oraz dane z [wikipedii](https://pl.wikipedia.org/wiki/Poczet_papie%C5%BCy).\n\nLista papieży dostępna jest w postaci tabel html w podziale na kolejne wieki naszej ery. Do pobrania zawartości tych tabel najlepszy będzie pakiet [rvest](https://cran.r-project.org/web/packages/rvest/index.html). Oprócz niego ładuje także pakiet [tidyverse](https://www.tidyverse.org/).\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(rvest)\n\nwiki <- \"https://pl.wikipedia.org/wiki/Poczet_papie%C5%BCy\"\n\ntmp <- wiki %>%\n  read_html %>%\n  html_nodes(\"table\")\n```\n:::\n\n\nNa stronie zidentyfikowano 24 tabele - w 21 znajdują się dane na temat papieży. XX wiek poprzedza tabela zawierająca informację o tym, że papieżowi przysługuje tytuł **Suweren Państwa Watykańskiego**. Dwie ostatnie tabele to stopka strony. W związku z powyższym wybieram tylko tabele zawierające interesujące mnie dane.\n\n\n::: {.cell}\n\n```{.r .cell-code}\npopes_list <- map(tmp, function(x) html_table(x, fill=T, header = T))\npopes_list <- popes_list[-20]\npopes_list <- popes_list[-22]\npopes_list <- popes_list[-22]\n```\n:::\n\n\nImię danego papieża do XI wieku znajdowało się w drugiej kolumnie tabeli, natomiast później dodano do tabel także herb, przez co imię przesunięto do trzeciej kolumny. Wybierając imiona papieży trzeba wziąć to pod uwagę.\n\n\n::: {.cell}\n\n```{.r .cell-code}\npopes_names <- map(popes_list, function(x) x[,2]) %>% \n  bind_rows()\n\nnames(popes_names)=paste0(\"papiez\",1:3)\n\npopes_names <- popes_names %>% \n  mutate_all(str_replace_na, replacement=\"\") %>% \n  mutate(papiez=str_c(papiez1,papiez2,papiez3))\n```\n:::\n\n\nPobieżna analiza imion papieży na stronie wikipedii może zasygnalizować kilka problemów, które utrudniają uzyskanie obiektu zawierającego wyłącznie imię i numer papieża. W tabelach umieszczono [antypapieży](https://pl.wikipedia.org/wiki/Antypapie%C5%BC), którzy nie są obiektem naszego zainteresowania. Ponadto przy niektórych imionach pojawia się skrót zakonu benedyktynów: OSB. Także kolejne przypisy zostały umieszone obok wybranych imion. Możemy się także dowiedzieć, że papież [Benedykt IX](https://pl.wikipedia.org/wiki/Benedykt_IX) papieżem zostawał trzykrotnie, za trzecim razem _\"(...) przy pomocy entuzjastycznego ludu i łapownictwa.\"_. Ostatnią zmianą jaką należy przeprowadzić jest traktowanie imienia Jan Paweł jako jednego. Wszystkie te operacje można wykonać wykorzystując wyrażenia regularne.\n\n\n::: {.cell}\n\n```{.r .cell-code}\npopes_names_clean <- popes_names %>%\n  # wyrzucenie antypapieży\n  filter(papiez != \"\",\n         !grepl(\"Antypapież\",papiez)) %>%\n  # usunięcie OSB\n  mutate(papiez=gsub(\"OSB\", \"\", papiez),\n         # usunięcie przypisów\n         papiez=gsub(\"\\\\[.*\", \"\", papiez),\n         # usunięcie wyrażenia \"po raz ...\"\n         papiez=gsub(\"Po raz.*\", \"\", papiez),\n         # Jan Paweł jako jedno imię\n         papiez=gsub(\"Jan Paweł\", \"JanPaweł\", papiez)) %>%\n  distinct() %>%\n  separate(papiez, into = c(\"name\", \"number\", \"adds\"), remove = F)\n```\n:::\n\n\nTym sposobem uzyskaliśmy zbiór 267 imion papieży, a w osobnych kolumnach samo imię, numer oraz dodatkowe przydomki (trzech papieży miało przydomek _Wielki_). Na podstawie tak przygotowanego zbioru możemy przedstawić najczęściej występujące imiona papieży.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnamesFreq <- popes_names_clean %>%\n  count(name)\n\nfilter(namesFreq, n > 4) %>%\n  ggplot(., aes(x=reorder(name, -n), y=n)) + \n  geom_col() + \n  coord_flip() +\n  xlab(\"Wybrane imię\") + ylab(\"\") +\n  theme_light()\n```\n\n::: {.cell-output-display}\n![](imie-papiez_files/figure-html/papieze-1.png){width=672}\n:::\n:::\n\n\nNajczęściej wybierane imię to Jan - 21 razy (po Janie XV był od razu Jan XVII, a po Janie XIX, Jan XXI), na drugim miejscu Benedykt (17 razy) wyprzedzający Grzegorza (16 razy). Za podium znajduje się Klemens, Innocenty, Leon, Pius i Stefan. Imion występujących tylko raz w ciągu ostatnich 2000 lat było 44, a wśród nich m.in. Anaklet, Eleuteriusz, Hormizdas czy Zefiryn - można się inspirować.\n\nKod w jednym kawałku dostępny jest na [githubie](https://github.com/lwawrowski/popes).\n\n\n",
    "supporting": [
      "imie-papiez_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}